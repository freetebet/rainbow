<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="org.rainbow.company.custMgmt.mapper.salesMapper">
 

 <!-- 상담 요청 리스트 가져오기-->
 <select id="getSalesList" resultType="org.rainbow.company.custMgmt.domain.salesVO" parameterType="org.rainbow.domain.Criteria">
 	<![CDATA[
	select cnslNo, cnslReqDt, cnslCoName,cnslName, cnslCt, cnslEmail, cnslBdgt, cnslSaleSt from (
	select rownum rn, cnslNo, cnslReqDt, cnslCoName,cnslName, cnslCt, cnslEmail, cnslBdgt, cnslSaleSt
	from(
	select cnslNo, cnslReqDt, cnslCoName,cnslName, cnslCt, cnslEmail, cnslBdgt, cnslSaleSt
	from RAIN_CnslReq_tbl 
	order by cnslNo)
	where rownum <= #{pageNum} * #{amount} ) 
	where rn > (#{pageNum}-1) * #{amount}
	]]> 
</select>
 

 
 <!-- 상담 요청 내용 가져오기-->
  <select id="getSalesView" resultType="org.rainbow.company.custMgmt.domain.salesVO" parameterType="int">
  	select * from RAIN_CnslReq_tbl where cnslNo=#{cnslNo}
  </select>
 
 <!-- salesView.jsp' 에서 영업 내용 저장하기 --> 
 <insert id="saveSales" parameterType="org.rainbow.company.custMgmt.domain.cnslHisVO">
 
 insert into RAIN_CnslHis_tbl values(#{cshisNo},#{csrNo},#{cshisEname},#{cshisSaleSt},#{cshisRespDt},
 #{cshisCnt1Dt},#{cshisCnt1},#{cshisCnt2Dt},#{cshisCnt2},#{cshisCnt3Dt},#{cshisCnt3},#{cshisCnt4Dt},
 #{cshisCnt4},#{cshisCnt5Dt},#{cshisCnt5},#{cshisFailRsn},#{cshisFailCmt})
 </insert>
 
 
 </mapper>